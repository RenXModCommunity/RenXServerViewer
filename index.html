<html>

<head>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
  <title>Renegade X Server List</title>
  <style>
    body,
    html {
      height: 100%;
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      text-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black;
    }

    ul {
      column-count: 2;
    }

    .bgimg {
      height: 100%;
      background-position: center;
      background-size: cover;
      position: relative;
      color: white;
      font-size: 25px;
      background-image:
      /* top, transparent red */
      linear-gradient(
        rgba(0, 0, 0, 0.45),
        rgba(0, 0, 0, 0.45)
        ),
        /* your image */
        url(https://i.imgur.com/sFpmCVe.png);
    }

    .topleft {
      position: absolute;
      top: 0;
      left: 16px;
    }

    .topright {
      position: absolute;
      top: 0;
      right: 0px;
      font-size: 16px;
    }

    .topright2 {
      position: absolute;
      top: 0;
      right: -100px;
      font-size: 16px;
    }

    .bottomleft {
      position: absolute;
      bottom: 0;
      left: 16px;
      font-size: 12px;
    }

    .bottomright {
      position: absolute;
      bottom: 0;
      right: 16px;
      font-size: 12px;
    }

    .middle {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      text-shadow: 0 0 10px #FF0000,
    }

    .newnew {
      opacity: 0;
      position: absolute;
      bottom: 0;
      right: 16px;
      font-size: 12px;
    }

    .new {
      opacity: 0;
      position: absolute;
      top: 55%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }

    .old,
    .new {
      transition: opacity 0.3s linear;
    }

    .wrap:hover .old {
      opacity: 0;
    }

    .wrap:hover .new {
      opacity: 1;
    }

    .oldold,
    .newnew {
      transition: opacity 0.3s linear;
    }

    .wrap:hover .oldold {
      opacity: 0;
    }

    .wrap:hover .newnew {
      opacity: 1;
    }

    hr {
      margin: auto;
      width: 40%;
    }

    h1 {
      font-size: 63px;
    }

    a:link {
      color: white;
      background-color: transparent;
      text-decoration: none;
    }

    a:visited {
      color: white;
      background-color: transparent;
      text-decoration: none;
    }

    a:hover {
      color: white;
      background-color: transparent;
      text-decoration: underline;
    }

    a:active {
      color: white;
      background-color: transparent;
      text-decoration: underline;
    }
  </style>

  <body>

    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var io = io();
      var socket = io.connect('142.93.67.215:8080');
      var allServers;
      var savedIndex = -1;
      var lastUUID = "";

      socket.on('message', function(message) {
        console.log('Server: ' + message);
        lastUUID = document.cookie.slice(9);
      })

      socket.on('renxData', function(rawdata) {
        allServers = rawdata;

        var x = document.getElementById("server-names");
        x.length = 0;

        for (const server in allServers) {
          var option = document.createElement("option");
          option.text = allServers[server].Name + ` (${allServers[server].Players}/${allServers[server]['Variables']['Player Limit']})`;
          option.value = allServers[server].UUID;
          x.add(option);
        }

        if (lastUUID != "") {
          document.getElementById("server-names").selectedIndex = allServers.findIndex(e => e.UUID == lastUUID);
        }

      })

      function setBG(map) {
        switch (map) {
          case "Field":
            map = "https://i.ibb.co/cYP8pNg/field1.png";
          break;
          case "Canyon":
            map = "https://i.ibb.co/Cv17WX4/canyon3.png";
          break;
          case "Lakeside":
            map = "https://i.ibb.co/hW1nNk3/lakeside4.png";
          break;
          case "Mesa":
            map = "https://i.ibb.co/WkBnrYG/mesa2.png";
          break;
          case "Complex":
            map = "https://i.ibb.co/DWwbLFr/complex1.png";
          break;
          case "Snow":
            map = "https://i.ibb.co/BLqft0R/snow1.png";
          break;
          case "Under":
            map = "https://i.ibb.co/CVnNX2Y/under3.png";
          break;
          case "Islands":
            map = "https://i.ibb.co/YtL80RM/islands1.png";
          break;
          case "XMountain":
            map = "https://i.ibb.co/0Y8VGLB/xmountain2.png";
          break;
          case "Whiteout":
            map = "https://i.ibb.co/TqpZq4s/whiteout2.png";
          break;
          case "GoldRush":
            map = "https://i.ibb.co/Tc8w3yQ/goldrush1.png";
          break;
          case "Field X":
            map = "https://i.ibb.co/rwkWPpK/fieldx1.png";
          break;
          case "Crash Site":
            map = "https://i.ibb.co/2dkWSP4/crashsite1.png";
          break;
          case "Islands":
            map = "https://i.ibb.co/6NLNjpy/islands3.png";
          break;
          case "Walls":
            map = "https://i.ibb.co/gFKBvcj/walls4.png";
          break;
          default:
            map = "https://i.ibb.co/cYP8pNg/field1.png";
        }

        document.getElementById("back").style.backgroundImage = `linear-gradient(
                rgba(0, 0, 0, 0.45),
                rgba(0, 0, 0, 0.45)
                ),
                /* your image */
                url('${map}')`;
      }

      function setInfo() {
        var selectedServer;

        if (!allServers) return;

        selectedServer = allServers[document.getElementById("server-names").selectedIndex]
      	servertitle.innerHTML = selectedServer.Name;
        playersfield.innerHTML = selectedServer.Players;
        botsfield.innerHTML = selectedServer.Bots;
        mapfield.innerHTML = selectedServer["Current Map"].slice(selectedServer["Current Map"].indexOf("-")+1).replaceAll("_", " ");
        maxfield.innerHTML = "/ " + selectedServer["Variables"]["Player Limit"];
        addedfield.innerHTML = "Total: " + parseInt(selectedServer.Players + parseInt(selectedServer.Bots));
        lastUUID = selectedServer.UUID;
        document.cookie = "lastuuid="+lastUUID+";secure"
        document.title = `${selectedServer.Name} - ${mapfield.innerHTML} (${selectedServer.Players} ${maxfield.innerHTML})`;

        setBG(selectedServer["Current Map"].slice(selectedServer["Current Map"].indexOf("-")+1).replaceAll("_", " "));

        var nodlist = document.getElementById("nodlist");
        nodlist.innerHTML = "";

        for (const player in selectedServer["PlayerList"]) {
          var node = document.createElement("LI");
          var textnode = document.createTextNode(selectedServer["PlayerList"][player].Name);
          node.appendChild(textnode);
          nodlist.appendChild(node)
        }
      }

      setInterval(setInfo, 100);
    </script>

    <div id="back" class="bgimg">
      <div class="topleft">
      <h3 id="servertitle">Renegade X Server</h3>
      	<label for="server-names">Choose a server:</label>
		<select name="server-names" id="server-names">
		  <option value="SomeUUID">Renegade X Server</option>
		</select>

      </div>
      <div class="wrap">
        <div class="middle">
          <div class="old">
            <h1 id="mapfield">Field</h1>
            <span>Player Count:</span>
            <span id="playersfield">0</span>
            <span id="maxfield">/ 64</span>
            <div>
              <span>Bot Count:</span>
              <span id="botsfield">69</span>
            </div>
          </div>
          <div class="new">
            <h1 id="addedfield">Total: 69</h1>
          </div>
        </div>
      </div>
      <div class="topright">
        <ul id="nodlist">
        	<li>SOme Nraomd Guy</li>
        	<li>SOme Nraomd Guy</li>
        	<li>SOme Nraomd Guy</li>
        	<li>SOme Nraomd Guy</li>
        	<li>SOme Nraomd Guy</li>
        	<li>SOme Nraomd Guy</li>
        	<li>SOme Nraomd Guy</li>
        	<li>SOme Nraomd Guy</li>
        	<li>SOme Nraomd Guy</li>
        	<li>SOme Nraomd Guy</li>
        </ul>
      </div>
      <div class="bottomleft">
        <p><a target="_blank" href="https://discord.gg/renegadex">Join Renegade X on Discord!</a></p>
      </div>
      <div class="wrap">
          <div class="bottomright">
              <div class="oldold">
            <p>Not sponsored or affiliated with Totem Arts or EA</p>
          </div>
          <div class="newnew">
              <p><a target="_blank" href="https://github.com/sevans045">Made with ❤️ by Sarah</a></p>
            </div>
            </div>
          </div>
        </div>
        </body>
    </head>
</html>
